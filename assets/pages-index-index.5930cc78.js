import{d as e,n as t,m as i,a,o as s,c as o,w as n,r,b as d,e as l,f as u,i as h,g as c,h as m,j as g,k as p,l as y,p as f,u as w,q as v}from"./index-980b42ea.js";import{_ as $,a as b}from"./u-icon.e68d22a1.js";import{_ as E}from"./u-text.a8684787.js";const S={props:{show:{type:Boolean,default:e.transition.show},mode:{type:String,default:e.transition.mode},duration:{type:[String,Number],default:e.transition.duration},timingFunction:{type:String,default:e.transition.timingFunction}}},_=e=>({enter:`u-${e}-enter u-${e}-enter-active`,"enter-to":`u-${e}-enter-to u-${e}-enter-active`,leave:`u-${e}-leave u-${e}-leave-active`,"leave-to":`u-${e}-leave-to u-${e}-leave-active`});const k=$({name:"u-transition",data:()=>({inited:!1,viewStyle:{},status:"",transitionEnded:!1,display:!1,classes:""}),emits:["click","beforeEnter","enter","afterEnter","beforeLeave","leave","afterLeave"],computed:{mergeStyle(){const{viewStyle:e,customStyle:t}=this;return{transitionDuration:`${this.duration}ms`,transitionTimingFunction:this.timingFunction,...uni.$u.addStyle(t),...e}}},mixins:[i,a,{methods:{clickHandler(){this.$emit("click")},async vueEnter(){const e=_(this.mode);this.status="enter",this.$emit("beforeEnter"),this.inited=!0,this.display=!0,this.classes=e.enter,await t(),await uni.$u.sleep(20),this.$emit("enter"),this.transitionEnded=!1,this.$emit("afterEnter"),this.classes=e["enter-to"]},async vueLeave(){if(!this.display)return;const e=_(this.mode);this.status="leave",this.$emit("beforeLeave"),this.classes=e.leave,await t(),this.transitionEnded=!1,this.$emit("leave"),setTimeout(this.onTransitionEnd,this.duration),this.classes=e["leave-to"]},onTransitionEnd(){this.transitionEnded||(this.transitionEnded=!0,this.$emit("leave"===this.status?"afterLeave":"afterEnter"),!this.show&&this.display&&(this.display=!1,this.inited=!1))}}},S],watch:{show:{handler(e){e?this.vueEnter():this.vueLeave()},immediate:!0}}},[["render",function(e,t,i,a,c,m){const g=h;return c.inited?(s(),o(g,{key:0,class:d(["u-transition",c.classes]),ref:"u-transition",onClick:e.clickHandler,style:l([m.mergeStyle]),onTouchmove:e.noop},{default:n((()=>[r(e.$slots,"default",{},void 0,!0)])),_:3},8,["onClick","class","style","onTouchmove"])):u("v-if",!0)}],["__scopeId","data-v-a0096be0"]]);const x=$({name:"u-image",mixins:[i,a,{props:{src:{type:String,default:e.image.src},mode:{type:String,default:e.image.mode},width:{type:[String,Number],default:e.image.width},height:{type:[String,Number],default:e.image.height},shape:{type:String,default:e.image.shape},radius:{type:[String,Number],default:e.image.radius},lazyLoad:{type:Boolean,default:e.image.lazyLoad},showMenuByLongpress:{type:Boolean,default:e.image.showMenuByLongpress},loadingIcon:{type:String,default:e.image.loadingIcon},errorIcon:{type:String,default:e.image.errorIcon},showLoading:{type:Boolean,default:e.image.showLoading},showError:{type:Boolean,default:e.image.showError},fade:{type:Boolean,default:e.image.fade},webp:{type:Boolean,default:e.image.webp},duration:{type:[String,Number],default:e.image.duration},bgColor:{type:String,default:e.image.bgColor}}}],data(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{},show:!1}},watch:{src:{immediate:!0,handler(e){e?(this.isError=!1,this.loading=!0):this.isError=!0}}},computed:{wrapStyle(){let e={};return e.width=this.$u.addUnit(this.width),e.height=this.$u.addUnit(this.height),e.borderRadius="circle"==this.shape?"10000px":uni.$u.addUnit(this.radius),e.overflow=this.radius>0?"hidden":"visible",uni.$u.deepMerge(e,uni.$u.addStyle(this.customStyle))}},mounted(){this.show=!0},emits:["click","error","load"],methods:{onClick(){this.$emit("click")},onErrorHandler(e){this.loading=!1,this.isError=!0,this.$emit("error",e)},onLoadHandler(e){this.loading=!1,this.isError=!1,this.$emit("load",e),this.removeBgColor()},removeBgColor(){this.backgroundStyle={backgroundColor:"transparent"}}}},[["render",function(e,t,i,a,d,y){const f=p,w=c(m("u-icon"),b),v=h,$=c(m("u-transition"),k);return s(),o($,{mode:"fade",show:d.show,duration:e.fade?1e3:0},{default:n((()=>[g(v,{class:"u-image",onClick:y.onClick,style:l([y.wrapStyle,d.backgroundStyle])},{default:n((()=>[d.isError?u("v-if",!0):(s(),o(f,{key:0,src:e.src,mode:e.mode,onError:y.onErrorHandler,onLoad:y.onLoadHandler,"show-menu-by-longpress":e.showMenuByLongpress,"lazy-load":e.lazyLoad,class:"u-image__image",style:l({borderRadius:"circle"==e.shape?"10000px":e.$u.addUnit(e.radius),width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)})},null,8,["src","mode","onError","onLoad","show-menu-by-longpress","lazy-load","style"])),e.showLoading&&d.loading?(s(),o(v,{key:1,class:"u-image__loading",style:l({borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.radius),backgroundColor:this.bgColor,width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)})},{default:n((()=>[r(e.$slots,"loading",{},(()=>[g(w,{name:e.loadingIcon,width:e.width,height:e.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):u("v-if",!0),e.showError&&d.isError&&!d.loading?(s(),o(v,{key:2,class:"u-image__error",style:l({borderRadius:"circle"==e.shape?"50%":e.$u.addUnit(e.radius),width:e.$u.addUnit(e.width),height:e.$u.addUnit(e.height)})},{default:n((()=>[r(e.$slots,"error",{},(()=>[g(w,{name:e.errorIcon,width:e.width,height:e.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):u("v-if",!0)])),_:3},8,["onClick","style"])])),_:3},8,["show","duration"])}],["__scopeId","data-v-075b3e14"]]),L=y({__name:"index",setup(e){const t=f();t.value="uniapp-vue3模板项目";const i=w();return console.log("store.user_name",i.user_name),(e,i)=>{const a=c(m("up-image"),x),r=c(m("up-text"),E),d=h;return s(),o(d,{class:"flex flex-col items-center justify-center"},{default:n((()=>[g(a,{class:"mb-50rpx mt-200rpx h-200rpx w-200rpx",src:"/static/logo.png",width:"200rpx",height:"200rpx"}),g(d,{class:"flex justify-center"},{default:n((()=>[g(r,{class:"font-size-36rpx color-gray-700",text:v(t)},null,8,["text"])])),_:1})])),_:1})}}});export{L as default};
